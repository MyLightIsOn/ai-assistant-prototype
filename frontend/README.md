This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.

## Progressive Web App (PWA)

This application is configured as a Progressive Web App, enabling installation on mobile and desktop devices with offline support.

### PWA Features

- **Installable**: Users can install the app to their home screen on mobile devices or desktop
- **Offline Support**: Core functionality works offline with smart caching strategies
- **App-like Experience**: Runs in standalone mode without browser UI
- **Fast Loading**: Pre-caches critical assets for instant loading
- **Background Sync**: Service worker handles background tasks and updates

### PWA Configuration

The PWA is configured using `next-pwa` in `next.config.ts`:

- **Development**: PWA is disabled to avoid caching issues during development
- **Production**: PWA is fully enabled with service worker registration
- **Caching Strategy**: Implements multiple cache strategies for different asset types:
  - **CacheFirst**: Google Fonts (365-day expiration)
  - **StaleWhileRevalidate**: Static assets (fonts, images, JS, CSS)
  - **NetworkFirst**: API calls and dynamic content (5-minute cache fallback)

### Manifest

The app manifest (`/public/manifest.json`) defines:

- App name and description
- Display mode (standalone)
- Theme colors (dark theme)
- Icons (192x192 and 512x512 PNG)
- App shortcuts to Dashboard and Tasks

### Installation

#### iOS (Safari)
1. Open the app in Safari
2. Tap the Share button
3. Tap "Add to Home Screen"
4. Confirm installation

#### Android (Chrome)
1. Open the app in Chrome
2. Tap the menu (three dots)
3. Tap "Install app" or "Add to Home Screen"
4. Confirm installation

#### Desktop (Chrome/Edge)
1. Open the app in Chrome or Edge
2. Look for the install icon in the address bar
3. Click "Install" in the prompt
4. The app will open in a standalone window

### Testing PWA

Run the PWA tests:

```bash
npm test -- lib/__tests__/pwa.test.ts
```

The test suite covers:
- Service worker registration
- Offline/online detection
- Installation events
- Manifest validation

### Manual Testing Checklist

- [ ] App can be installed on mobile device (iOS/Android)
- [ ] App can be installed on desktop (Chrome/Edge/Safari)
- [ ] App works offline (try disconnecting network)
- [ ] Service worker registers successfully (check DevTools > Application > Service Workers)
- [ ] Manifest is valid (check DevTools > Application > Manifest)
- [ ] Icons appear correctly on home screen
- [ ] App opens in standalone mode (no browser UI)
- [ ] Caching works (check Network tab, cached resources show "from ServiceWorker")
- [ ] Updates apply correctly (refresh should update the app)

### Service Worker

The service worker is automatically generated by `next-pwa` during production builds. It:

- Pre-caches critical assets
- Implements runtime caching strategies
- Handles offline requests
- Manages cache updates
- Supports background sync

Generated files (excluded from git):
- `public/sw.js` - Main service worker
- `public/workbox-*.js` - Workbox runtime libraries
- `public/worker-*.js` - Additional worker scripts

### Troubleshooting

**Service worker not updating:**
1. Unregister the old service worker in DevTools
2. Clear cache and hard reload (Cmd+Shift+R / Ctrl+Shift+F5)
3. Rebuild the app

**App not installable:**
1. Verify manifest.json is accessible at `/manifest.json`
2. Check icons are present in `/public/`
3. Ensure HTTPS is used (or localhost for testing)
4. Verify service worker is registered

**Caching issues in development:**
- PWA is disabled in development mode to prevent caching conflicts
- Service worker only runs in production builds (`npm run build && npm start`)

### Resources

- [next-pwa Documentation](https://github.com/shadowwalker/next-pwa)
- [PWA Best Practices](https://web.dev/progressive-web-apps/)
- [Service Worker API](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)
- [Web App Manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest)
